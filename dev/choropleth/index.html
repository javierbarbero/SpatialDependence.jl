<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Choropleth Maps · SpatialDependence.jl</title><meta name="title" content="Choropleth Maps · SpatialDependence.jl"/><meta property="og:title" content="Choropleth Maps · SpatialDependence.jl"/><meta property="twitter:title" content="Choropleth Maps · SpatialDependence.jl"/><meta name="description" content="Documentation for SpatialDependence.jl."/><meta property="og:description" content="Documentation for SpatialDependence.jl."/><meta property="twitter:description" content="Documentation for SpatialDependence.jl."/><meta property="og:url" content="https://javierbarbero.github.io/SpatialDependence.jl/choropleth/"/><meta property="twitter:url" content="https://javierbarbero.github.io/SpatialDependence.jl/choropleth/"/><link rel="canonical" href="https://javierbarbero.github.io/SpatialDependence.jl/choropleth/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SpatialDependence.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../sweightmatrices/">Spatial Weight Matrices</a></li><li><a class="tocitem" href="../spatiallag/">Spatial Lag</a></li><li><a class="tocitem" href="../gspatialautocorrelation/">Global Spatial Autocorrelation</a></li><li><a class="tocitem" href="../lspatialautocorrelation/">Local Spatial Autocorrelation</a></li><li class="is-active"><a class="tocitem" href>Choropleth Maps</a><ul class="internal"><li><a class="tocitem" href="#Graduated"><span>Graduated</span></a></li><li><a class="tocitem" href="#Statistical"><span>Statistical</span></a></li><li><a class="tocitem" href="#Unique-Values"><span>Unique Values</span></a></li><li><a class="tocitem" href="#Co-location"><span>Co-location</span></a></li><li><a class="tocitem" href="#Customizing-Maps"><span>Customizing Maps</span></a></li><li><a class="tocitem" href="#Classify-without-mapping"><span>Classify without mapping</span></a></li></ul></li><li><a class="tocitem" href="../parallelcomputing/">Parallel Computing</a></li><li><a class="tocitem" href="../bibliography/">Bibliography</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Choropleth Maps</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Choropleth Maps</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/javierbarbero/SpatialDependence.jl/blob/main/docs/src/choropleth.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Choropleth-Maps"><a class="docs-heading-anchor" href="#Choropleth-Maps">Choropleth Maps</a><a id="Choropleth-Maps-1"></a><a class="docs-heading-anchor-permalink" href="#Choropleth-Maps" title="Permalink"></a></h1><p>The package contains functions to plot Choropleth Maps using different classification methods.</p><p>All the examples on this page asummes that the Guerry dataset and the <a href="http://docs.juliaplots.org">Plots.jl</a> package is loaded.</p><pre><code class="language-julia hljs">using SpatialDependence
using SpatialDatasets
using Plots

guerry = sdataset(&quot;Guerry&quot;);</code></pre><p>Choropleth maps can be made with <code>plot</code> function, with the first parameter being a vector of geometries, the second parameter the variable to classify, and the third parameter the classification method to use:</p><pre><code class="language-julia hljs">plot(guerry.geometry, guerry.Litercy, EqualIntervals())</code></pre><p>It is also possible to pass a Table or a DataFrame as the first parameter and a symbol as the second parameter:</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, EqualIntervals())</code></pre><h2 id="Graduated"><a class="docs-heading-anchor" href="#Graduated">Graduated</a><a id="Graduated-1"></a><a class="docs-heading-anchor-permalink" href="#Graduated" title="Permalink"></a></h2><h3 id="Equal-Intervals"><a class="docs-heading-anchor" href="#Equal-Intervals">Equal Intervals</a><a id="Equal-Intervals-1"></a><a class="docs-heading-anchor-permalink" href="#Equal-Intervals" title="Permalink"></a></h3><p>Spatial observations are grouped into categories of the same length:</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, EqualIntervals())</code></pre><img src="fc4d8cd9.svg" alt="Example block output"/><p>It is possible to specify a different number of intervals:</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, EqualIntervals(3))</code></pre><h3 id="Quantiles"><a class="docs-heading-anchor" href="#Quantiles">Quantiles</a><a id="Quantiles-1"></a><a class="docs-heading-anchor-permalink" href="#Quantiles" title="Permalink"></a></h3><p>Spatial observations are grouped according to quantiles:</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, Quantiles())</code></pre><img src="1de34ba5.svg" alt="Example block output"/><p>By default, spatial observations are categorized in quintiles (5 quantiles). It is possible to specify a different number of quantiles:</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, Quantiles(4))</code></pre><h3 id="Natural-Breaks-(Jenks)"><a class="docs-heading-anchor" href="#Natural-Breaks-(Jenks)">Natural Breaks (Jenks)</a><a id="Natural-Breaks-(Jenks)-1"></a><a class="docs-heading-anchor-permalink" href="#Natural-Breaks-(Jenks)" title="Permalink"></a></h3><p>The Natural Breaks (Jenks) algorithm classify observations into groups with low heterogeneity within groups and high heterogeneity between groups:</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, NaturalBreaks())</code></pre><img src="c583f56c.svg" alt="Example block output"/><p>Is it possible to specify a different number of groups:</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, NaturalBreaks(7))</code></pre><h3 id="Custom-Breaks"><a class="docs-heading-anchor" href="#Custom-Breaks">Custom Breaks</a><a id="Custom-Breaks-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-Breaks" title="Permalink"></a></h3><p>Users can specify the bins to generate custom breaks. The lower bound of the first class is set at the minimum value and the upper bound of the last class at the maximum value.</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, CustomBreaks([20, 30, 60]))</code></pre><img src="0070f7cd.svg" alt="Example block output"/><h2 id="Statistical"><a class="docs-heading-anchor" href="#Statistical">Statistical</a><a id="Statistical-1"></a><a class="docs-heading-anchor-permalink" href="#Statistical" title="Permalink"></a></h2><h3 id="Box-Plot-(Box-map)"><a class="docs-heading-anchor" href="#Box-Plot-(Box-map)">Box Plot (Box map)</a><a id="Box-Plot-(Box-map)-1"></a><a class="docs-heading-anchor-permalink" href="#Box-Plot-(Box-map)" title="Permalink"></a></h3><p>This method classify observations as in a box plot:</p><table><tr><th style="text-align: right">Category</th><th style="text-align: right">Lower</th><th style="text-align: right">Upper</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">-<span>$\infty$</span></td><td style="text-align: right"><span>$Q_{25} - h * IQR$</span></td></tr><tr><td style="text-align: right">2</td><td style="text-align: right"><span>$Q_{25} - h * IQR$</span></td><td style="text-align: right"><span>$Q_{25}$</span></td></tr><tr><td style="text-align: right">3</td><td style="text-align: right"><span>$Q_{25}$</span></td><td style="text-align: right"><span>$Q_{50}$</span></td></tr><tr><td style="text-align: right">4</td><td style="text-align: right"><span>$Q_{50}$</span></td><td style="text-align: right"><span>$Q_{75}$</span></td></tr><tr><td style="text-align: right">5</td><td style="text-align: right"><span>$Q_{75}$</span></td><td style="text-align: right"><span>$Q_{75} + h * IQR$</span></td></tr><tr><td style="text-align: right">6</td><td style="text-align: right"><span>$Q_{75} + h * IQR$</span></td><td style="text-align: right"><span>$\infty$</span></td></tr></table><p>where <span>$Q_{25}$</span>, <span>$Q_{50}$</span> and <span>$Q_{75}$</span>, are the first, second and third quartile respectively. <span>$IQR$</span> is the interquartile range, and <span>$h$</span> is the hinge.</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, BoxPlot())</code></pre><img src="645fb274.svg" alt="Example block output"/><p>By default, the hinge is set to <span>$1.5$</span>, but the user can choose a different value:</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, BoxPlot(3.0))</code></pre><h3 id="Standard-Deviation"><a class="docs-heading-anchor" href="#Standard-Deviation">Standard Deviation</a><a id="Standard-Deviation-1"></a><a class="docs-heading-anchor-permalink" href="#Standard-Deviation" title="Permalink"></a></h3><p>In this method, observations are z-standardization and classified as standard deviations from the mean:</p><table><tr><th style="text-align: right">Category</th><th style="text-align: right">Lower</th><th style="text-align: right">Upper</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">-<span>$\infty$</span></td><td style="text-align: right"><span>$-2$</span></td></tr><tr><td style="text-align: right">2</td><td style="text-align: right"><span>$-2$</span></td><td style="text-align: right"><span>$-1$</span></td></tr><tr><td style="text-align: right">3</td><td style="text-align: right"><span>$-1$</span></td><td style="text-align: right"><span>$0$</span></td></tr><tr><td style="text-align: right">4</td><td style="text-align: right"><span>$0$</span></td><td style="text-align: right"><span>$1$</span></td></tr><tr><td style="text-align: right">5</td><td style="text-align: right"><span>$1$</span></td><td style="text-align: right"><span>$2$</span></td></tr><tr><td style="text-align: right">6</td><td style="text-align: right"><span>$2$</span></td><td style="text-align: right"><span>$\infty$</span></td></tr></table><pre><code class="language-julia hljs">plot(guerry, :Litercy, StdMean())</code></pre><img src="50371e0e.svg" alt="Example block output"/><h3 id="Percentiles"><a class="docs-heading-anchor" href="#Percentiles">Percentiles</a><a id="Percentiles-1"></a><a class="docs-heading-anchor-permalink" href="#Percentiles" title="Permalink"></a></h3><p>Observations are classified according to the following percentiles:</p><table><tr><th style="text-align: right">Category</th><th style="text-align: right">Lower</th><th style="text-align: right">Upper</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">minimum</td><td style="text-align: right"><span>$1\%$</span></td></tr><tr><td style="text-align: right">2</td><td style="text-align: right"><span>$1\%$</span></td><td style="text-align: right"><span>$10\%$</span></td></tr><tr><td style="text-align: right">3</td><td style="text-align: right"><span>$10\%$</span></td><td style="text-align: right"><span>$50\%$</span></td></tr><tr><td style="text-align: right">4</td><td style="text-align: right"><span>$50\%$</span></td><td style="text-align: right"><span>$90\%$</span></td></tr><tr><td style="text-align: right">5</td><td style="text-align: right"><span>$90\%$</span></td><td style="text-align: right"><span>$99\%$</span></td></tr><tr><td style="text-align: right">6</td><td style="text-align: right"><span>$99\%$</span></td><td style="text-align: right">maximum</td></tr></table><pre><code class="language-julia hljs">plot(guerry, :Litercy, Percentiles())</code></pre><img src="ce2fd913.svg" alt="Example block output"/><p>It is possible to specify different percentiles:</p><pre><code class="language-julia hljs">plot(guerry.geometry, guerry.Litercy, Percentiles([10, 30, 50, 70, 90]))</code></pre><h2 id="Unique-Values"><a class="docs-heading-anchor" href="#Unique-Values">Unique Values</a><a id="Unique-Values-1"></a><a class="docs-heading-anchor-permalink" href="#Unique-Values" title="Permalink"></a></h2><p>In a Unique Values map, each unique value is assigned to a different category.</p><pre><code class="language-julia hljs">plot(guerry, :Region, Unique())</code></pre><img src="d98766cf.svg" alt="Example block output"/><h2 id="Co-location"><a class="docs-heading-anchor" href="#Co-location">Co-location</a><a id="Co-location-1"></a><a class="docs-heading-anchor-permalink" href="#Co-location" title="Permalink"></a></h2><p>Co-location maps are used to identify spatial observations where the categories of two or more variables match.</p><pre><code class="language-julia hljs">plot(guerry, [:Litercy, :Donatns], CoLocation(BoxPlot()))</code></pre><img src="76dd12c6.svg" alt="Example block output"/><h2 id="Customizing-Maps"><a class="docs-heading-anchor" href="#Customizing-Maps">Customizing Maps</a><a id="Customizing-Maps-1"></a><a class="docs-heading-anchor-permalink" href="#Customizing-Maps" title="Permalink"></a></h2><p>By default, the lower interval is <strong>open</strong> (value not included), and the upper interval is <strong>closed</strong> (value is included). It is possible to change this behavior by setting the <code>lower</code> and <code>upper</code> parameters to <code>:open</code> or <code>:closed</code>.</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, Quantiles(), lower = :closed, upper = :open)</code></pre><img src="ab3f1b52.svg" alt="Example block output"/><p><strong>Total counts</strong> are automatically added to the labels of the categories in the map. It is possible to suppress counts by setting the <code>counts</code> parameter to <code>false</code>.</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, Quantiles(), counts = false)</code></pre><img src="09b03f5e.svg" alt="Example block output"/><p>In graduated maps, the lower and upper bound are separated with a comma. It is possible to specify a different <strong>separator</strong> with the <code>sep</code> parameter:</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, Quantiles(), sep = &quot; -- &quot;)</code></pre><img src="f2265af3.svg" alt="Example block output"/><p>It is possible to change the <strong>legend</strong> position with the <code>legend</code> parameter. Possible values are: :best, <code>:topleft</code>, <code>:top</code>, <code>:topright</code>, <code>:right</code>, <code>:bottomright</code>, <code>:bottom</code>,  <code>:bottomleft</code>, <code>:left</code>. It also possible to place the legend outside the plot area with: <code>:outertopleft</code>, <code>:outertop</code>, <code>:outertopright</code>, <code>:outerright</code>, <code>:outerbottomright</code>, <code>:outerbottom</code>, <code>:outerbottomleft</code>. The legend can be removed by setting the parameter to <code>false</code>.</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, Quantiles(), legend = :topleft)</code></pre><img src="3248a540.svg" alt="Example block output"/><p>The legend&#39;s white background color can be removed by passing the argument <code>background_color_legend = nothing</code> and the black border with <code>foreground_color_legend = nothing</code>.</p><p><strong>Color palette</strong> is set by default to <code>:YlOrBr</code> for graduated maps, reverse <code>:RdBu</code> for statistical maps, and  <code>:Paired</code> for unique values maps. Users can change the palette with the <code>palette</code> parameter and reverse the colors by setting <code>rev</code> to <code>true</code>. A list of the color shcemes available in the Plots.jl package can be found <a href="http://docs.juliaplots.org/latest/generated/colorschemes/#Pre-defined-ColorSchemes">here</a>.</p><pre><code class="language-julia hljs">plot(guerry, :Litercy, Quantiles(), palette = :greens, rev = true)</code></pre><img src="9c086fcb.svg" alt="Example block output"/><h2 id="Classify-without-mapping"><a class="docs-heading-anchor" href="#Classify-without-mapping">Classify without mapping</a><a id="Classify-without-mapping-1"></a><a class="docs-heading-anchor-permalink" href="#Classify-without-mapping" title="Permalink"></a></h2><p>Users interested only in the classification and not in the choropleth map can use the functions <code>mapclassify</code> to obtain the classification of observations according to the criteria listed before.</p><pre><code class="language-julia hljs">mc = mapclassify(Quantiles(), guerry.Litercy);</code></pre><p>It is possible to obtain the number of observations on each class with the <code>counts</code> function:</p><pre><code class="language-julia hljs">counts(mc)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">5-element Vector{Int64}:
 18
 19
 15
 16
 17</code></pre><p>The lower and upper bounds can be retrieved with the <code>bounds</code> function:</p><pre><code class="language-julia hljs">lbound, ubound = bounds(mc)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">([12.0, 23.0, 31.0, 43.0, 54.400000000000006], [23.0, 31.0, 43.0, 54.400000000000006, 74.0])</code></pre><p>With the <code>maplabels</code> function, it is possible to generate the labels of the classes:</p><pre><code class="language-julia hljs">labs = maplabels(mc)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">5-element Vector{String}:
 &quot;[12.0, 23.0] (18)&quot;
 &quot;(23.0, 31.0] (19)&quot;
 &quot;(31.0, 43.0] (15)&quot;
 &quot;(43.0, 54.4] (16)&quot;
 &quot;(54.4, 74.0] (17)&quot;</code></pre><p>We can obtain the class to which each observation is assigned with the <code>assignments</code> function:</p><pre><code class="language-julia hljs">assignments(mc)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">85-element Vector{Int64}:
 3
 4
 1
 4
 5
 2
 5
 1
 5
 3
 ⋮
 1
 2
 1
 3
 2
 2
 1
 5
 4</code></pre><p>For unique values and Co-location classifications, the levels of the classes can be obtained with the <code>levels</code> class:</p><pre><code class="language-julia hljs">mc = mapclassify(Unique(), guerry.Region)
levels(mc)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">5-element Vector{String}:
 &quot;E&quot;
 &quot;N&quot;
 &quot;C&quot;
 &quot;S&quot;
 &quot;W&quot;</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../lspatialautocorrelation/">« Local Spatial Autocorrelation</a><a class="docs-footer-nextpage" href="../parallelcomputing/">Parallel Computing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.0 on <span class="colophon-date" title="Saturday 20 April 2024 12:16">Saturday 20 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
